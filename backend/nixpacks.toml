# Nixpacks configuration for Railway
# Ajuda a acelerar o build

[phases.setup]
nixPkgs = ['nodejs-20_x', 'npm-10_x']

[phases.install]
cmds = ['cd backend && npm ci --production=false']

[phases.build]
cmds = ['cd backend && DATABASE_URL="${DATABASE_URL:-postgresql://user:password@localhost:5432/db?schema=public}" npx prisma generate || echo "⚠️  Prisma generate falhou, mas continuando..."']

[start]
cmd = 'sh backend/start.sh'

